<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Profe Civilizado ¬∑ Recursos ESO</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Recursos interactivos de Matem√°ticas y Programaci√≥n." />
  <link rel="stylesheet" href="assets/style.css" />
  <script src="assets/main.js"></script>
  <style>
    .details-block { margin: 10px 0; }
    .details-block summary { font-weight: 600; cursor: pointer; }
    .form-row{display:grid;grid-template-columns:160px 1fr;gap:10px;align-items:center;margin:8px 0}
    .result{font-weight:700;text-align:center;padding:10px;border:1px solid rgba(37,99,235,.25);border-radius:12px;background:rgba(37,99,235,.06)}
    .hidden{display:none}
    .embed-wrap{overflow:hidden;border-radius:12px;box-shadow:var(--shadow);background:var(--card)}
    .spacer{height:6px}
    .muted{color:var(--muted)}
    .status{font-size:14px;margin:8px 0}
    @media (max-width: 600px){ .form-row{ grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <!-- NAV -->
  <nav>
    <div class="nav-inner">
      <a href="index.html" class="brand">Profe Civilizado</a>
      <div class="links" role="navigation" aria-label="Navegaci√≥n principal">
        <a href="index.html">Inicio</a>
        <a href="sobre-mi.html">Sobre m√≠</a>        
        <a href="recursos-eso.html" class="active">Recursos ESO</a>
        <a href="recursos-bachillerato.html">Recursos Bachillerato</a>
        <a href="contacto.html">Contacto</a>
      </div>
      <button id="themeToggle" class="toggle" aria-label="Cambiar tema">üåì</button>
    </div>
  </nav>

  <!-- CONTENIDO -->
  <main class="content">
    <section class="panel">
      <h3>Recursos interactivos</h3>
      <p class="muted">Despliega lo que necesites. Compacto, claro y listo para clase.</p>

      <!-- 1) GeoGebra -->
      <details class="details-block" id="ggb">
        <summary>üìê Applet GeoGebra: Lugares geom√©tricos de un tri√°ngulo</summary>
        <div class="spacer"></div>
        <div class="embed-wrap">
          <iframe
            src="https://www.geogebra.org/material/iframe/id/hqfjmn2p/width/800/height/600/border/888888/rc/false/ai/false/sdz/true"
            width="100%" height="500" style="border:0;" allowfullscreen loading="lazy">
          </iframe>
        </div>
      </details>

      <!-- 2) Calculadora en PYTHON con Pyodide -->
      <details class="details-block" id="calc-py" open>
        <summary>üêç Calculadora de Pit√°goras (Python en el navegador con Pyodide)</summary>
        <div class="spacer"></div>

        <p class="status" id="py-status">Cargando motor de Python‚Ä¶ (primera vez puede tardar unos segundos)</p>

        <div class="form-row">
          <label for="py-mode">¬øQu√© datos tienes?</label>
          <select id="py-mode" disabled>
            <option value="">Selecciona una opci√≥n</option>
            <option value="catetos">Dos catetos</option>
            <option value="cateto_hip">Un cateto y la hipotenusa</option>
          </select>
        </div>

        <div id="py-catetos" class="hidden">
          <div class="form-row">
            <label for="py-a">Cateto a:</label>
            <input id="py-a" type="number" step="any" min="0" placeholder="Ej. 3" />
          </div>
          <div class="form-row">
            <label for="py-b">Cateto b:</label>
            <input id="py-b" type="number" step="any" min="0" placeholder="Ej. 4" />
          </div>
          <div class="form-row">
            <span></span>
            <button class="btn" id="py-run-catetos" disabled>Calcular</button>
          </div>
        </div>

        <div id="py-hip" class="hidden">
          <div class="form-row">
            <label for="py-cat">Cateto conocido:</label>
            <input id="py-cat" type="number" step="any" min="0" placeholder="Ej. 5" />
          </div>
          <div class="form-row">
            <label for="py-hipo">Hipotenusa:</label>
            <input id="py-hipo" type="number" step="any" min="0" placeholder="Ej. 13" />
          </div>
          <div class="form-row">
            <span></span>
            <button class="btn" id="py-run-hip" disabled>Calcular</button>
          </div>
        </div>

        <div id="py-out" class="result hidden" role="status" aria-live="polite"></div>
      </details>

        <!-- 3) Factorizaci√≥n de polinomios -->
        <details class="details-block" id="factor-poly">
          <summary>üßÆ Factorizaci√≥n de polinomios (Python)</summary>
          <div class="spacer"></div>
        
          <p class="muted">
            Introduce los coeficientes en orden, separados por comas.
            <br>Ejemplo: <code>1,-3,-4</code> ‚Üí x¬≤ ‚àí 3x ‚àí 4
          </p>
        
          <div class="form-row">
            <label for="poly-coefs">Coeficientes:</label>
            <input id="poly-coefs" type="text" placeholder="1,-3,-4">
          </div>
        
          <div class="form-row">
            <span></span>
            <button class="btn" id="poly-run" disabled>Factorizar</button>
          </div>
        
          <pre id="poly-out" class="result hidden"></pre>
        </details>

        <!-- Pyodide desde CDN -->
        <script src="https://cdn.jsdelivr.net/pyodide/v0.26.2/full/pyodide.js"></script>
        <script>
            // Estado UI
            const statusEl = document.getElementById('py-status');
            const modeSel  = document.getElementById('py-mode');
            const blocCat  = document.getElementById('py-catetos');
            const blocHip  = document.getElementById('py-hip');
            const btnCat   = document.getElementById('py-run-catetos');
            const btnHip   = document.getElementById('py-run-hip');
            const outEl    = document.getElementById('py-out');
  
            function show(el){ el.classList.remove('hidden'); }
            function hide(el){ el.classList.add('hidden'); }
            function out(msg){ outEl.textContent = msg; show(outEl); }
  
            // Inicializa Pyodide una vez
            let pyodide;
            (async () => {
              try{
                pyodide = await window.loadPyodide({
                  indexURL: "https://cdn.jsdelivr.net/pyodide/v0.26.2/full/"
                });

                await pyodide.runPythonAsync(`
import math
from math import gcd

super_indices = {"0":"^0","1":"^1","2":"^2","3":"^3","4":"^4","5":"^5","6":"^6","7":"^7","8":"^8","9":"^9"}
def exp_super(n):
    return "".join(super_indices[c] for c in str(n))

def limpiar_coeficientes(coefs):
    while len(coefs) > 1 and coefs[0] == 0:
        coefs = coefs[1:]
    return coefs

def mostrar_polinomio(coefs):
    grado = len(coefs) - 1
    partes = []
    for i, c in enumerate(coefs):
        if c == 0:
            continue
        exp = grado - i
        signo = " + " if c > 0 and partes else " - " if c < 0 else ""
        valor = abs(c)
        coef = "" if valor == 1 and exp > 0 else str(valor)
        if exp > 1:
            term = f"{coef}x{exp_super(exp)}"
        elif exp == 1:
            term = f"{coef}x"
        else:
            term = f"{coef}"
        partes.append(signo + term)
    return "".join(partes) if partes else "0"

def mostrar_parentesis(coefs):
    return "(" + mostrar_polinomio(coefs) + ")"

def factor_lineal(r):
    if r == 0:
        return "(x)"
    return f"(x + {abs(r)})" if r < 0 else f"(x - {r})"

def factor_comun(coefs, pasos):
    m = abs(coefs[0])
    for c in coefs[1:]:
        m = gcd(m, abs(c))
    if m == 1:
        m = None

    k = 0
    while len(coefs) > k + 1 and coefs[-1 - k] == 0:
        k += 1

    if not m and k == 0:
        pasos.append("No se puede extraer factor com√∫n.")
        return None, coefs

    nuevos = coefs[:]
    if m:
        nuevos = [c // m for c in nuevos]
    if k:
        nuevos = nuevos[:-k]

    fc = ""
    if m:
        fc += str(m)
    if k == 1:
        fc += "x"
    elif k > 1:
        fc += f"x{exp_super(k)}"

    pasos.append(f"Factor com√∫n: {fc}")
    pasos.append(f"{fc}¬∑{mostrar_parentesis(nuevos)}")
    return fc, nuevos

def factorizar_web(coefs):
    pasos = []
    factores = []

    coefs = limpiar_coeficientes(coefs)
    pasos.append("Polinomio:")
    pasos.append(mostrar_polinomio(coefs))

    fc, actual = factor_comun(coefs, pasos)
    if fc:
        factores.append(fc)

    if len(actual) == 2:
        a, b = actual
        r = -b // a
        pasos.append(f"x = {r}")
        factores.append(factor_lineal(r))
    else:
        pasos.append("No se puede factorizar m√°s.")
        factores.append(mostrar_parentesis(actual))

    return {
        "pasos": "\n".join(pasos),
        "factores": " ¬∑ ".join(factores)
    }

def hipotenusa(a: float, b: float) -> float:
    if a <= 0 or b <= 0:
        raise ValueError("Los catetos deben ser positivos.")
    return math.sqrt(a*a + b*b)

def cateto_faltante(cat: float, hip: float) -> float:
    if cat <= 0 or hip <= 0:
        raise ValueError("Valores positivos, por favor.")
    if hip <= cat:
        raise ValueError("La hipotenusa debe ser mayor que el cateto.")
    return math.sqrt(hip*hip - cat*cat)
              `);
                statusEl.textContent = "Python cargado. ¬°Listo para calcular! üí™";
                modeSel.disabled = false;
              }catch(e){
                statusEl.textContent = "Error al cargar Python en el navegador. Revisa tu conexi√≥n.";
                console.error(e);
              }finally{
                if (btnCat) btnCat.disabled = false;
                if (btnHip) btnHip.disabled = false;
              }
            })();
  
            // Cambio de modo
            modeSel.addEventListener('change', () => {
              hide(outEl);
              if (modeSel.value === 'catetos'){ show(blocCat); hide(blocHip); }
              else if (modeSel.value === 'cateto_hip'){ show(blocHip); hide(blocCat); }
              else { hide(blocCat); hide(blocHip); }
            });
  
            // Bot√≥n: dos catetos
            btnCat.addEventListener('click', async () => {
              const a = parseFloat(document.getElementById('py-a').value);
              const b = parseFloat(document.getElementById('py-b').value);
              if (isNaN(a) || isNaN(b) || a <= 0 || b <= 0){ out('Introduce valores num√©ricos positivos en ambos catetos.'); return; }
              try{
                pyodide.globals.set('a', a);
                pyodide.globals.set('b', b);
                const c = await pyodide.runPythonAsync(`hipotenusa(a, b)`);
                out(`Hipotenusa: ${c.toFixed(2)}`);
              }catch(e){ out(e.message || String(e)); }
            });
  
            // Bot√≥n: un cateto + hipotenusa
            btnHip.addEventListener('click', async () => {
              const cat = parseFloat(document.getElementById('py-cat').value);
              const hip = parseFloat(document.getElementById('py-hipo').value);
              if (isNaN(cat) || isNaN(hip) || cat <= 0 || hip <= 0){ out('Introduce valores num√©ricos positivos en cateto e hipotenusa.'); return; }
              try{
                pyodide.globals.set('cat', cat);
                pyodide.globals.set('hip', hip);
                const falt = await pyodide.runPythonAsync(`cateto_faltante(cat, hip)`);
                out(`Cateto faltante: ${falt.toFixed(2)}`);
              }catch(e){ out(e.message || String(e)); }
            });
  
            const polyBtn = document.getElementById("poly-run");
            const polyOut = document.getElementById("poly-out");

            polyBtn.disabled = false;
            
            polyBtn.addEventListener("click", async () => {
              try {
                const txt = document.getElementById("poly-coefs").value;
                const coefs = txt.split(",").map(x => parseInt(x.trim()));
            
                pyodide.globals.set("coefs", coefs);
                const res = await pyodide.runPythonAsync(`
                import js
                js.Object.fromEntries(factorizar_web(coefs).items())
                `);
  
                polyOut.textContent =
                  "PASOS:\n" + res.pasos +
                  "\n\nFACTORIZACI√ìN:\n" + res.factores;
            
                polyOut.classList.remove("hidden");
              } catch (e) {
                polyOut.textContent = "Error en los coeficientes introducidos.";
                polyOut.classList.remove("hidden");
              }
            });
      </script>
    </section>
  </main>

  <footer>
    ¬© <span id="y"></span> Profe Civilizado ‚Äî Hecho con HTML & CSS
  </footer>
</body>
</html>















